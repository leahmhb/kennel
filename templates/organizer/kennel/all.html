	{% extends "base.html" %}

	{% block title %}List{% endblock %}

	{% block content %}
	<h1>Kennels</h1>

	<h3 class="text-condensed">{% lorem 10 w random %}</h3>
	<a href="{% url 'organizer:new-kennel' %}" 
	class="btn btn-sm btn-outline-success mt-3">
	<i class="fas fa-plus"></i> Create New
</a>
<table class="table">
	<thead>
		<tr>
			<th>Actions</th>
			<th>Name</th>
			<th>City</th>			
			<th>State</th>	
			<th>Country</th>	
			<th>Owners</th>
		</tr>
	</thead>
	<tbody>
		{% for ken in kennels %}
		<tr data-kennel-slug="{{ ken.slug }}">
			<td>				
				<button class="btn btn-sm" 
				@click="getModal('{{ ken.slug }}')">
				<i class="fas fa-pencil text-success"></i>
			</button>
			<button class="btn btn-sm"
			@click="confirmDelete('{{ ken.slug }}')">
			<i class="fas fa-trash text-danger"></i>
		</button>
	</td>
	<td><a href="{{ ken.get_absolute_url }}">{{ ken.name }} Standard Poodles</a></td>
	<td>{% if ken.city %}{{ ken.city }}{% endif %}</td>
	<td>{% if ken.state %}{{ ken.state }}{% endif %}</td>
	<td>{{ ken.country }}</td>
	<td>{% for o in ken.get_person %}
		<a href="{{ o.get_absolute_url }}">{{ o }}</a>
		{% if not forloop.last %}
		<b>&</b> 
		{% endif %}
	{% endfor %}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% include 'includes/pagination.html' %}
{% include 'organizer/kennel/modals.html' %}

{% endblock content %}

{% block before_javascript %}
{{ selects.states | safe | json_script:"states" }}
{{ selects.countries| safe | json_script:"countries" }}
<script>
	var CONFIG = {
		"delete_modal": "delete-kennel-modal",
		"edit_modal": "edit-kennel-modal",

		'url_item': "{% url 'kennel-list' %}",

		'url_states': "{% url 'choices:get-states' %}",
		'url_countries': "{% url 'choices:get-countries' %}",
		'selects': {
			'states': JSON.parse(document.getElementById('states').textContent),
			'countries': JSON.parse(document.getElementById('countries').textContent),
		}
	}
</script>
{% endblock before_javascript %}